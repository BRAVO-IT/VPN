#!/bin/bash
# Install V2Ray using official fhs-install-v2ray method
bash <(curl -Ls https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install.sh)

# Generate VMESS Configuration
UUID=$(uuidgen)
cat > /usr/local/etc/v2ray/config.json <<EOF
{
  "inbounds": [{
    "port": 1080,
    "protocol": "vmess",
    "settings": {
      "clients": [{
        "id": "$UUID",
        "alterId": 64
      }]
    }
  }],
  "outbounds": [{
    "protocol": "freedom",
    "settings": {}
  }]
}
EOF

# Restart V2Ray service
systemctl enable v2ray
systemctl restart v2ray

# Print Node Information
echo "Your VMESS Proxy Configuration:"
echo "Protocol : VMESS"
echo "Address  : $(hostname -I | awk '{print $1}')"
echo "Port     : 1080"
echo "UUID     : $UUID"
echo "AlterId  : 64"
