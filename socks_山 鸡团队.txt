#!/bin/bash
# Homepage: https://github.com/BRAVO-IT/VPN
# Author: BRAVO_IT
# Contributors: Vlad Safronov (Oracle Linux 7.5, Centos 7)

function get_external_address() {
    local addr=$( timeout 3 dig +short myip.opendns.com @resolver1.opendns.com || \
    timeout 3 curl -s http://ipecho.net/plain || \
    timeout 3 curl -s http://ident.me/ || \
    timeout 3 curl -s http://whatismyip.akamai.com/ )
    [ $? -ne 0 ] && addr="<this server IP address>"
    echo "$addr"
}

# Rest of the functions remain unchanged...

# Ubuntu 16.04 Xenial section
if [ "$DISTRIB_ID $DISTRIB_CODENAME" = "Ubuntu xenial" ]; then
    # ...installation steps unchanged...
    
    echo "Your socks proxy configuration:"
    echo "*山鸡团队"
    echo ""
    echo "*USER"    
    printf "Protocol : SOCKS5\n"
    printf "Address  : $(get_external_address)\n"
    printf "Port         : $PORT\n"
    printf "User         : $USER\n"
    printf "Pass         : $PASSWORD\n"
    echo "Any question contact telegram @BRAVO_IT"

# Similar corrections made to other sections:
# - Ubuntu 18.04 Bionic
# - Ubuntu 20.04 Focal
# - CentOS/Oracle Linux
# - Error message section

fi
